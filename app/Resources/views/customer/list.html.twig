{% extends "base.html.twig"%}

{% block body %}

    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ label }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}


    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        <div class="widget alert alert-info adjusted">
            <h4>Usuario autenticado como <strong>{{ app.user.username }}</strong></h4>
            <a href="{{ path('logout') }}"><i class="icon-off"></i>Logout</a>   
        </div>       
    {% elseif is_granted('IS_AUTHENTICATED_REMEMBERED') %}
        <div class="widget alert alert-danger adjusted">
            <strong>Usuario logueado via cookie o remembered</strong>
        </div>         
    {% elseif is_granted('IS_AUTHENTICATED_ANONYMOUSLY') %}
        <div class="widget alert alert-danger adjusted">
            <strong>Estas como Usuario anonimo o invitado</strong>
        </div>  
    {% endif %}

    <a href="{{ path('admin_download_csv') }}" class="btn btn-danger" role="button">Descargar Csv</a><br><br>
    
    {% if customers is not empty %}  
        <table id="table-list"  class="table table-striped table-bordered responsive table-striped table-hover datatable" >
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>CURP</th> 
                    <th>RFC</th> 
                    <th>Correo</th>
                    <th>Fecha nacimiento</th>
                    <th>Lugar nacimiento</th>
                    <th>Codigo postal</th> 
                </tr>        
            </thead>
            <tbody>                         
                {% for customer in customers %}
                    <tr>  
                        <td>{{ customer.getFullName() }}</td> 
                        <td>{{ customer.getCurp }}</td>
                        <td>{{ customer.getRfc }}</td>   
                        <td>{{ customer.getEmail() }}</td>
                        <td>{{ customer.getDateOfBirth()|date('Y-m-d') }}</td>
                        <td>{{ customer.getNamePlaceOfBirth }}</td>
                        <td>{{ customer.getPostCode }}</td> 
                    </tr> 
                {% endfor %}               
            </tbody>
        </table>
        <div  class="table table-striped table-bordered"></div>
    {% else %}
        <div class="alert alert-warning">
            <strong>Sin registros</strong>
        </div>         
    {% endif%}  

    <script>

        $(document).ready(function ()
        {
            $('#table-list').DataTable(
                    {
                        "pageLength": 5,
                        "aaSorting": [[0, 'asc']]
                    });
        });
    </script>

{% endblock %}